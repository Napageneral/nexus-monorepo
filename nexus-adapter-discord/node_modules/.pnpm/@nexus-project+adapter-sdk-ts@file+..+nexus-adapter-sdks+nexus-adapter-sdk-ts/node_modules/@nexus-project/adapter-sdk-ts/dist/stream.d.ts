import { type AdapterStreamStatus, type StreamEvent } from "./protocol.js";
import type { AdapterContext } from "./run.js";
export type StreamHandlers = {
    onStart?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "stream_start";
    }>) => void | Promise<void>;
    onToken?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "token";
    }>) => void | Promise<void>;
    onToolStatus?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "tool_status";
    }>) => void | Promise<void>;
    onReasoning?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "reasoning";
    }>) => void | Promise<void>;
    onEnd?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "stream_end";
    }>) => void | Promise<void>;
    onError?: (ctx: AdapterContext, event: Extract<StreamEvent, {
        type: "stream_error";
    }>) => void | Promise<void>;
};
export declare function emitStreamStatus(status: AdapterStreamStatus, stdout?: NodeJS.WriteStream, validate?: boolean): void;
export declare function handleStream(opts: {
    ctx: AdapterContext;
    handlers: StreamHandlers;
    stdin?: NodeJS.ReadableStream;
    stdout?: NodeJS.WriteStream;
    validate?: boolean;
}): Promise<void>;
